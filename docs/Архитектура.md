Помочь разобраться с таким сложным понятием как "Умный дом" нам поможет метод декомпозиции. Попробуем представить архитектуру этой концепции.

# Потребности

Это верхушка пирамиды, объединяющая основные потребности, которые потребитель может удовлетворить при помощи "умного дома".

- Нехватка времени ведет к желанию переложить обязанности и лишнюю работу на автоматические устройства.
- Необходимость предупреждать негативные события ведет к автоматическому контролю.
- Удорожание стоимости коммунальных услуг ведет к желанию экономить и оптимизировать расходы.
- Естественное стремление к комфорту ведет к усовершенствованию возможностей приборов и оборудования, задействованию их в сложных сценариях.
- Желание снизить тревожность ведет к автоматическому отслеживанию событий, которые могут возникнуть в отсутствии хозяев.

# Решения

Подходы к удовлетворению одной и той же потребности могут сильно различаться, поскольку это индивидуально для каждого потребителя. 
Контекст решения также накладывает отпечаток, ведь особенности решения будут сильно отличаться для квартиры и коттеджа, наприрмер. 
Очевидно, что число возможных решений сопоставимо с числом потребителей. Но, все же начать можно с перечисления более-менее типовых решений.

- Поддержка комфортной среды обитания
    - Климат-контроль
    - Уход за растениями
    - Гибкое размещение органов управления домом
- Проявление заботы и создание уюта
    - Привычные и ожидаемые сценарии
    - Режимы работы устройств в зависимости от контекста
- Помощь в выполнении рутиных операций
    - Снятие/отправка показаний счетчиков
- Экономия на коммунальных расходах
    - Детализация расхода ресурсов
    - Отключение лишних потребителей
- Предотвращение аварий
    - Обнаружение и отключение забытых электроприборов
    - Обнаружение и устранение протечек
    - Закрытие окон
- Выявление и отслеживание неправомерных действий
    - Обнаружение нештатных ситуаций в помещении и уведомление о них
    - Визуальный дистанционный осмотр помещения
- Предотвращение несанкционированного проникновения
    - Электронные замки

# Элементы

Логические кубики, из которых строится любое решение, назовем элементами автоматизации "умного дома". Элемент реализует конкретную функцию в решении, например, отслеживает значение какого-то параметра с заданным интервалом времени. Элементом может быть "умный датчик" или другое "умное устройство".

- Измерение
    - Измерение параметров окружающей среды (влажность, температура, концентрация веществ, освещенность, шум)
    - Измерение количества потребленных ресурсов (электроэнергии, воды и т.п.)
- Обнаружение
    - Обнаружение присутствия членов семьи в доме
    - Обнаружение присутствия человека в комнате
    - Обнаружение отклонений от нормы (открытие двери, протечка, забытые электроприборы и т.п.)
- Уведомление
    - Голосовое уведомление
    - Уведомление на телефон
    - Уведомление на мониторе или телевизоре
- Визуализация
    - Отображение изменения параметра во времени
    - Отображение мгновенного состояния "умного дома"
- Управление
    - Управление электрической нагрузкой (свет, электроприборы и т.п.)
    - Управление кнопочными приборами (чайник, выключатель и т.п.)
    - Управление вентилем или клапаном
    - Управление сервоприводом
    - Управление помпой
    - Голосовое управление
    - Управление сложными приборами (телевизор, медиацентр и т.п.)
- Идентификация
    - Идентификация человека в помещении
    - Идентификация члена семьи с использованием метки
- Логика
    - Сценарии управления и оркестрация

# Технологии

На этом уровне расположены всевозможные физические устройства, реализующие элементы автоматизации умного дома.

- Видеокамеры
- Видеомониторы
- Датчики
- Герконы
- Реле
- Сервоприводы
- Робопальцы
- Помпы
- Клапаны
- Домашняя техника
- Контроллеры
- Микроконтроллеры
- Медиацентр
- Звуковое оборудование
- Смартфоны

# Физический уровень

Реализация технологических компонентов умного дома может быть очень разной. Например, компоненты могут быть соединены в сеть при помощи проводов, а могут взаимодействовать по радиоканалу. Датчик может периодически сообщать о своих параметрах всем желающим, а может наоборот опрашиваться центральным компонентом. Реализация в этих случаях будет совершенно разной, будет отличаться удобством, надежностью, стоимостью и другими критериями. Рассмотрим типовые топологии.

### Датчик - Устройство

Это самая распространенная и доступная схема домашней автоматизации. Типичный пример - дистанционный выключатель, например, для управление светом. Основной минус таких устройств - они малопригодны для интеграции в экосистему "умного дома", они самодостаточны и интеграция это не про них. В этих технологиях могут использоваться пропритерные протоколы и технологии.

### Датчики - Контроллер - Устройства

Классическая схема организации коробочных решений "умного дома". Контроллер реализует выполнение сценариев, визуализацию состояния "умного дома", управляет элементами и собирает показания с датчиков. Такая схема может быть реализована по-разному, что влияет на потребительские характеристики.

#### "Проводная" реализация

Предполагает соединение компонентов проводами, встраивание компонентов в электропроводку квартиры или дома. Безупречная надежность. Подходит для новых квартир или домов. Сопряжено со многими неудобствами при инталляции в квартире с отделкой. Требует заранее продуманного плана инсталляции. Небольшая гибкость в случае увеличения поддерживаемых решений или изменения сценариев.

#### "Беспроводная" реализация

Предполагает коммуникацию компонентов по открытым радиоканалам: WiFi, ZigBee, Z-Wave, Bluetooth и т.п. Высокая гибкость к расположению компонентов. Возможна постепенная реализация решений "умного дома". Расстояния и внутренняя конфигурация помещения влияют на дальность действия и качество связи. Видимость устройств в соседних квартирах многоквартирного дома. Требуется использовать и обслуживать источники питания для некоторых компонентов.

#### "Закрытые" контроллеры

Самый распространенный случай. Производитель привязывает потребителя к своим технологиям, своему пониманию концепции "умного дома", полностью решает за потребителя какие сценарии ему нужны, важны. Вроде бы похоже на готовый продукт, но есть проблемы.

Хорошая реализация стоит очень дорого. Слабая реализация скорее дискредитирует идею "умного дома", поскольку почти ничего не решает и не позволяет потребителю реализовать свое видение идеи, в итоге потребитель не видит ценности.

Не всегда можно купить компоненты для замены или расширения, поскольку продавец слабо представлен в регионах. 
Высокая дороговизна компонентов из-за необходимости создания собственного производства, сертификации.

#### "Открытые" контроллеры

Набирающий популярность тренд. Открытость предполагает реализацию любых решений, работу с любыми компонентами, производителями и коммуникационными технологиями. Потребитель не заперт в клетке идей, принципов и технологий одного поставщика.

Низкий порог входа. Можно начать с минимальными вложениями, даже бесплатно. Достижима реализация всех решений "умного дома". Если сложить всех производителей компонентов, то есть из чего выбрать.

Поскольку открытость технологии реализуется посредством программного обеспечения, то резко возрастают возможности реализации сложных решений, использующих алгоритмы AI и ML.

Сложность заключается в высоких требованиях к знаниям и навыкам. Этот вариант больше подходит для инженеров, программистов, технически подкованных любителей. И здесь стоит задача адаптации экосистемы для рядового потребителя.
