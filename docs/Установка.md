[Умная квартира или дом своими руками](http://cutecare.ru)

Мы сделали установку контроллера умной квартиры Home Assistant (HASS) таким образом, что это не создаст конфликтов с уже установленным ранее ПО. Это очень удобно, поскольку вам не придется разгребать проблемы, связанные с отсутствющими и несовместимыми версиями библиотек и т.п. Вам будет легко сделать резервную копию, легко удалить или переустановить контроллер. Вы даже можете поставить несколько контроллеров на один микрокомпьютер или медиацентр.

# Raspberry Pi 3

Установка операционной системы на Raspberry Pi выполняется просто и быстро. 
Достаточно записать [образ](https://www.raspberrypi.org/downloads/raspbian/) на microSD-карту и включить устройство.
Установка Raspbian завершится автоматически.

Мы предлагаем выполнить установку с использованием специально подготовленного [Docker-образа](https://hub.docker.com/r/cutecare/rpi-home-assistant/). Образ подготовлен для работы с датчиками и устройствами, взаимодействующими по Bluetooth. Если вы планируете разработку или использование этих датчиков, то этот образ именно то, что вам нужно. 

После установки операционной системы и настройки сетевых параметров, необходимо подключиться к микрокомпьютеру по SSH. 

> Если вы используете Windows, то используйте приложение [Putty](http://www.putty.org/).
> Логин и пароль зависят от установленного образа, по умолчанию для Raspbian: pi/raspberry, для OSMC: osmc/osmc

Выполните установку Docker-образа по [этой инструкции](https://github.com/cutecare/rpi-home-assistant).

В процессе запуска образа выполняется установка доп. компонентов HASS, так что подождите несколько минут. После завершения установки  Home Assistant будет доступен через браузер по порту 8123, а его конфигурация в каталоге /home/home-assistant

Теперь вы можете приступить к настройке контроллера для управления вашей умной квартирой или домом.

# Orange Pi Zero Plus 2 H5

Установка операционной системы на Orange Pi может вызвать некоторые затруднения, на есть [подробные инструкции](https://theturingsingularity.com/orange-pi-zero-plus-2-h5-resources/), описывающие все по шагам. Вот несколько основных моментов, которые нужно учесть.

[Скачайте](https://www.armbian.com/orange-pi-zero-2-h5/) образ операционной системы, распакуйте архив и запишите его на SD-карту, например, с использованием [этой инструкции](http://orangepi.su/content.php?p=68&c=Ustanovka%20vsekh%20OS%20krome%20Android%20na%20Orange%20Pi).

Конкретно эта плата не имеет USB-разъема для клавиатуры, так что для первичной настройки вам потребуется:

* USB-разветвитель (с функцией питания), куда вы подключите клавиатуру, а также монитор, к которому вы подключитесь через HDMI.
* Либо используйте любую плату Arduino в качестве USB-UART интефрейса. В этом случае отдельной клавиатуры и монитора вам не потребуется. Взаимодействие будет происходить через Putty (для Windows), подключенного к COM-порту, на котором висит Arduino. Подключить Arduino к Orange Pi можно по следующей схеме:

<img src="https://github.com/cutecare/cutecare-docs/blob/master/images/OrangePiTTL_bb.png?raw=true" width="500">

Для подключения к ОС в этом случае необходимо:

1. Установить Arduino IDE, подключить Arduino к Orange Pi по схеме выше и к ПК по USB
2. Через Devices Manager выяснить номер COM-порта, на котором висит Arduino
3. Запустить Putty, выбрать способ подключения Serial, указать COM-порт и скорость соединения 115200
4. Открыть соединение и нажать любую клавишу в открывшемся терминале, после этого вы получите приглашение к авторизации.

После авторизации необходимо открыть штатную утилиту настройки armbian-config и подключить плату к WiFi. Теперь вы можете отключить плату от ПК или телевизора/монитора и подключиться к микрокомпьютеру через SSH по сети. 

> Если вы используете Windows, то используйте приложение [Putty](http://www.putty.org/).
> Логин и пароль зависят от установленного образа, по умолчанию для Armbian: root/1234

Выполните установку Docker-образа по [этой инструкции](https://github.com/cutecare/opi-home-assistant). 
В зависимости от используемого образа ОС (его версии), а также версии самой платы, вам может потребоваться настройка автоматического включения модуля Bluetooth. В инструкции по установке Docker-образа подробно описано, что нужно для этого сделать.

После завершения установки приложение Home Assistant будет доступно через браузер по стандартному порту 80, а его конфигурация в каталоге /home/home-assistant

Теперь вы можете приступить к настройке контроллера для управления вашей умной квартирой или домом.
