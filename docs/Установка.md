Установка операционной системы на Raspberry Pi выполняется просто и быстро. 
Достаточно записать [образ](https://www.raspberrypi.org/downloads/raspbian/) на microSD-карту и включить устройство.
Установка Raspbian завершится автоматически.

Различные приложения, предлагают собственные образы, которые устанавливают ОС и дополнительные компоненты, необходимые для работы. 
Например, вы можете загрузить и установить образ [OSMC](https://osmc.tv/download/) (Open Source Media Center), затем уже сможете доустановить другие приложения.

Если вы устанавливаете контроллер на существующий медиацентр, то вам пригодится технология "легковесной виртуализации", например, [Docker](https://www.docker.com/). Контроллер в этом случае устанавливается как Docker-контейнер, то есть таким образом, что это не создаст конфликтов с уже установленным ранее ПО. Это очень удобно, поскольку вам не придется разгребать проблемы, связанные с отсутствющими и несовместимыми версиями библиотек и т.п. С такого контейнера легко сделать резервную копию (простым копированием образа), легко удалить. Вы даже можете поставить несколько контроллеров на один медиацентр.

# Home Assistant (HASS)

Мы предлагаем выполнить установку, с использованием специально подготовленного [Docker-образа](https://hub.docker.com/r/cutecare/rpi-home-assistant/). У HASS также есть несколько штатных способов установки, включая [установку из образа](https://home-assistant.io/hassio/installation/).

Наш Docker-образ специально подготовлен для работы с датчиками и устройствами, взаимодействующими по Bluetooth.
Если вы планируете разработку или использование этих датчиков, то этот образ именно то, что вам нужно. 
С другой стороны, вы всегда самостоятельно сможете доустановить нужные компоненты, все описано в [скрипте сборки образа](https://github.com/cutecare/rpi-home-assistant/blob/master/build.sh)

После установки операционной системы и настройки сетевых параметров, необходимо подключиться к микрокомпьютеру по ssh. 

> Если вы используете Windows, то используйте приложение [Putty](http://www.putty.org/)

> Логин и пароль зависят от установленного образа, по умолчанию для Raspbian: pi/raspberry, для OSMC: osmc/osmc

Теперь необходимо установить docker.

> Перед установкой уточните URL до .deb-файла, он может измениться

```
sudo -s
apt-get update && apt-get -y dist-upgrade && apt-get -y install libltdl7 libapparmor1
wget --secure-protocol=TLSv1 --no-check-certificate -O package.deb https://download.docker.com/linux/raspbian/dists/jessie/pool/stable/armhf/docker-ce_17.09.0~ce-0~raspbian_armhf.deb
dpkg -i package.deb
```

После этого установите подготовленный нами Docker-образ HASS

```
mkdir /home/home-assistant
sudo docker run -d --name hass --restart unless-stopped -p 8123:8123 --cap-add=SYS_ADMIN --cap-add=NET_ADMIN --net=host -v /home/home-assistant:/config -v /etc/localtime:/etc/localtime:ro cutecare/rpi-home-assistant:latest
```

В процессе запуска образа выполняется установка доп. компонентов HASS, так что подождите несколько минут, перед тем как открывать приложение по порту 8123. Затем подключите использование компонентов cutecare

```
cd /home/home-assistant
apt-get install -y git
git clone https://github.com/cutecare/home-assistant.git
docker exec hass rm -r /usr/local/lib/python3.5/dist-packages/homeassistant/components
docker exec hass ln -s /config/home-assistant/homeassistant/components /usr/local/lib/python3.5/dist-packages/homeassistant/components
docker restart hass
```

После завершения установки приложение Home Assistant будет доступно через браузер по порту 8123, а его конфигурация в каталоге /home/home-assistant

Подробнее об установке и просмотре логов читайте [здесь](https://github.com/cutecare/rpi-home-assistant).

